{% extends "volunteer/base.html" %}

{### header ###}

{% block profileExtraHeader %}

	{### this block can put additional css / script definition to head tag ###}
	<!-- block profileExtraHeader here -->
<link href="/static/css/jquery-ui/ui.all.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" src="/static/js/jquery-ui-1.6rc5.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
	var linkObjs = $("a[href*='friend/create']");
	linkObjs.click(function(e) {
	    e.preventDefault();
	    var target = $(this);
	    $.getJSON(target.attr("href"), function(data) {
		if (data.statusCode >= 200 && data.statusCode < 300)
		{
		    alert('新增成功');
		    window.location.reload();
		}
		else
		    alert('新增失敗 : ' + data.reason);
		});
	});

	var previewObj = $("#preview");
	previewObj.click(function(e) {
	    e.preventDefault();
	    var previewBoxObj = $("#previewBox");
	    var previewImgURL = $("#id_logo").attr("value");
	    previewBoxObj.empty();
	    previewBoxObj.append('<img width="175" src="' + previewImgURL + '" />');

	    previewBoxObj.show().dialog({
		resizable:  false,
		close: function(e, ui) { previewBoxObj.hide().dialog('destroy'); }
	    });
	});
    });
</script>
{% endblock profileExtraHeader %}

{### content ###}

{% block profileContent %}

			    	<h3 id="page-title">編輯基本資料</h3>
				{% if isWarning %}
				<div class="ui-widget-header" style="clear: both; padding: 5px; text-align: center; font-size: large;">
				    {{ isWarning }}
				</div>
				{% endif %}

				<form action="{{ base.path|escape }}" method="POST" name="edit-profile" id="edit-profile">
				    	<div class="content-block form-block">
							<div class="block-caption">
								<span class="caption">基本資料</span>
							</div>
							<dl>
								<dt>姓, 名</dt>
								<dd>
								{{ form.volunteer_first_name }}
								{% for error in form.volunteer_first_name.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								,
								{{ form.volunteer_last_name }}
								{% for error in form.volunteer_last_name.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<dt>生日</dt>
								<dd>
								{{ form.birthyear }}
								{% for error in form.birthyear.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								/
								{{ form.birthmonth }}
								{% for error in form.birthmonth.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								/
								{{ form.birthday }}</dd>
								{% for error in form.birthday.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								<dt>性別</dt>
								<dd>
								{{ form.sex }}
								{% for error in form.sex.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<dt>所在地</dt>
								<dd>
								{{ form.resident_city }}
								{% for error in form.resident_city.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<dt>大頭貼圖片</dt>
								<dd>
								{{ form.logo }}
								<input id="preview" class="field button" type="button" value="預覽" />
								{% for error in form.logo.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<div id="previewBox" style="display: none;" title="預覽"></div>
							</dl>
						</div>
				    	<div class="content-block form-block">
							<div class="block-caption">
								<span class="caption">聯絡資訊</span>
							</div>
							<dl>
								<dt>電子郵件信箱</dt>
								<dd>{{ email }}</dd>
								{% for error in form.email.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}

								<dt>即時通訊</dt>
								<dd>
								{{ form.im_type }}
								{% for error in form.im_type.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								{{ form.im_account }}
								{% for error in form.im_account.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>

								<dt>手機號碼</dt>
								<dd>
								{{ form.phone1 }}
								{% for error in form.phone1.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								-
								{{ form.phone2 }}
								{% for error in form.phone2.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								-
								{{ form.phone3 }}
								{% for error in form.phone3.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<dt>網頁/部落格</dt>
								<dd>
								{{ form.blog }}
								{% for error in form.blog.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
							</dl>
						</div>
				    	<div class="content-block form-block">
							<div class="block-caption">
								<span class="caption">學歷與工作</span>
							</div>
							<dl>
								<dt>就讀/畢業學校</dt>
								<dd>
								{{ form.school }}
								{% for error in form.school.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<dt>服務單位/公司</dt>
								<dd>
								{{ form.organization }}
								{% for error in form.organization.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
								<dt>職稱</dt>
								<dd>
								{{ form.title }}
								{% for error in form.title.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
								</dd>
							</dl>
						</div>
				    	<div class="content-block form-block">
							<div class="block-caption">
								<span class="caption">個人專長</span>
							</div>
							<dl>
								<dt>我的專長</dt>
								<dd>{{ form.expertise }}</textarea></dd>
								{% for error in form.expertise.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
							</dl>
						</div>
				    	<div class="content-block form-block">
							<div class="block-caption">
								<span class="caption">自我簡介</span>
							</div>
							<dl>
								<dt>自我簡介</dt>
								<dd>{{ form.brief_intro }}</dd>
								{% for error in form.brief_intro.errors %}
								<span class="error">{{ error|escape }}</span>
								{% endfor %}
							</dl>
						</div>
				    	<div class="content-block form-block">
				    	<input type="submit" value="儲存變更" name="submit" id="submit-button"/>
				    	<input type="button" value="取消變更" name="cancel" id="cancel-button"/>
				    	</div>
				    </form>
{% endblock %}
